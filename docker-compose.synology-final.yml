services:
  obsidian-node:
    image: yuchanshin/obsidian-node:v1.0.0
    container_name: obsidian-node
    environment:
      - DATA_DIR=/root/data
      - TOR_ENABLED=true
    ports:
      - "18333:8333"  # P2P port
      - "18545:8545"  # RPC port
      - "9050:9050"   # Tor SOCKS proxy
    volumes:
      - /volume1/HDD_DATA/obsidian:/root/data
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pgrep obsidiand || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 90s
